<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <form id="accessTokenForm" action="https://github.com/login/oauth/access_token" method="post">
        <input type="hidden" name="client_id" id="client_id" value="3a54502458a4cd3feabe" />
        <input type="hidden" name="client_secret" id="client_secret" value="" />
        <input type="hidden" name="code" id="code" value="" />
        <input type="hidden" name="redirect_uri" id="redirect_uri" value="http://localhost/~tschortsch/github-user-inspector/github-auth.html" />
        <input type="submit" value="senden" />
    </form>

    <form id="saveAccessToken">
        <label for="access_token">Access Token</label>
        <input type="text" name="access_token" id="access_token" />
        <input type="submit" value="save access token" />
    </form>

<script>
    const currentUrl = new URL(window.location.href);
    const code = currentUrl.searchParams.get('code');
    if(code) {
        console.log(code);
        document.querySelector('#code').value = code;
    }


    const saveAccessTokenForm = document.querySelector('#saveAccessToken');
    const accessToken = document.querySelector('#access_token');
    saveAccessTokenForm.addEventListener('submit', e => {
        e.preventDefault();
        window.localStorage.setItem('swhtd-gh-access-token', accessToken.value);
    });

</script>
</body>
</html>